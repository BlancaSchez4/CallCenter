@model PagedList.IPagedList<Softv.Entities.ServicioEntity>
@using PagedList.Mvc;
<script src="@Url.Content("~/Content/Plugin/Selectric/jquery.selectric.js")" type="text/javascript"></script>
<link href="~/Content/Plugin/selectric.css" rel="stylesheet" />
<link href="~/Content/check/skins/square/blue.css" rel="stylesheet" />
<script src="@Url.Content("~/Scripts/icheck.js")" type="text/javascript"></script>
<script>
    @Html.Raw(ViewBag.CustomScriptsDefault)
    var valpagesize = '';

      var valClv_TipSer = '';

      var valDescripcion = '';

      var valClv_Txt = '';

      var valAplicanCom = '';

      var valSale_en_Cartera = '';

      var valPrecio = '';

      var valGenera_Orden = '';

      var valEs_Principal = '';

      var valClv_Trabajo = '';

    function LoadData() {
    $("#cargandoGrid").show();
    $('#cargandoGrid').css("display", "inline");
    valpagesize = $("#selectPage").val();
    if (typeof pageSelected === 'undefined') { pageSelected = 1 }
    $.ajax({
    type: "GET",
    url: "@Url.Action("QuickIndex", "Servicio")",
    data: { page: pageSelected, pageSize:valpagesize,
    Clv_TipSer : valClv_TipSer,Descripcion : valDescripcion,Clv_Txt : valClv_Txt,AplicanCom : valAplicanCom,Sale_en_Cartera : valSale_en_Cartera,Precio : valPrecio,Genera_Orden : valGenera_Orden,Es_Principal : valEs_Principal,Clv_Trabajo : valClv_Trabajo },
    success: function (data) {
    if (data.Success == 'False') {
    $('#cargandoGrid').css("display", "none");
    $('#Buscador').css("display", "inline");
    ShowNotification('Advertencia', data.Message, 'notice')
    }
    else {
    $('#DatosTabla').html(data);
    ReloadScript();
    $('#cargandoGrid').css("display", "none");
    }
    },
    error: function (xhr, ajaxOptions, thrownError) {
    ShowNotification('Error', thrownError + '' + xhr.status, 'error')
    $('#cargandoGrid').css("display", "none");
    }
    });
    }
    function pagechange() {
    $('#Paginator').on('click', 'a', function () {
    LoadData();
    return false;
    });
    }

    $(document).ready(function () {
    pagechange();
    //pone los check
    $('input').iCheck({
    checkboxClass: 'icheckbox_square-red',
    radioClass: 'iradio_square-red',
    });
    $("#selectPage").change(function () {
    valpagesize = $("#selectPage").val();
    LoadData();
    });


      $('#Clv_TipSertxt').keyup(function (e) {
      if (e.keyCode == 13) {
      SearchFilter();
      }
      });

      $('#Descripciontxt').keyup(function (e) {
      if (e.keyCode == 13) {
      SearchFilter();
      }
      });

      $('#Clv_Txttxt').keyup(function (e) {
      if (e.keyCode == 13) {
      SearchFilter();
      }
      });

      $('#AplicanComtxt').keyup(function (e) {
      if (e.keyCode == 13) {
      SearchFilter();
      }
      });

      $('#Sale_en_Carteratxt').keyup(function (e) {
      if (e.keyCode == 13) {
      SearchFilter();
      }
      });

      $('#Preciotxt').keyup(function (e) {
      if (e.keyCode == 13) {
      SearchFilter();
      }
      });

      $('#Genera_Ordentxt').keyup(function (e) {
      if (e.keyCode == 13) {
      SearchFilter();
      }
      });

      $('#Es_Principaltxt').keyup(function (e) {
      if (e.keyCode == 13) {
      SearchFilter();
      }
      });

      $('#Clv_Trabajotxt').keyup(function (e) {
      if (e.keyCode == 13) {
      SearchFilter();
      }
      });


    $(".btnBuscar").click(function () {
    pageSelected = 1;
    SearchFilter();
    });
    });

    function SearchFilter()
    {
    $("#cargandoGrid").show();
    $('#cargandoGrid').css("display", "inline");
    var valpagesizeTemp = $("#selectPage").val();

     var valClv_TipSerTemp = $("#Clv_TipSertxt").val();

     var valDescripcionTemp = $("#Descripciontxt").val();

     var valClv_TxtTemp = $("#Clv_Txttxt").val();

     var valAplicanComTemp = $("#AplicanComtxt").val();

     var valSale_en_CarteraTemp = $("#Sale_en_Carteratxt").val();

     var valPrecioTemp = $("#Preciotxt").val();

     var valGenera_OrdenTemp = $("#Genera_Ordentxt").val();

     var valEs_PrincipalTemp = $("#Es_Principaltxt").val();

     var valClv_TrabajoTemp = $("#Clv_Trabajotxt").val();

    var workPageSelected;
    if (typeof pageSelected  === 'undefined') {workPageSelected = 1}
    else {workPageSelected = pageSelected}
    $.ajax({
    type: "POST",
    url: "@Url.Action("QuickIndex", "Servicio")", // Method , Controler
    data: { page: workPageSelected, pageSize:valpagesizeTemp,
    Clv_TipSer : valClv_TipSerTemp,Descripcion : valDescripcionTemp,Clv_Txt : valClv_TxtTemp,AplicanCom : valAplicanComTemp,Sale_en_Cartera : valSale_en_CarteraTemp,Precio : valPrecioTemp,Genera_Orden : valGenera_OrdenTemp,Es_Principal : valEs_PrincipalTemp,Clv_Trabajo : valClv_TrabajoTemp },
    success: function (data) {
    if (data.Success == 'False') {
    $('#cargandoGrid').css("display", "none");
    $('#Buscador').css("display", "inline");
    ShowNotification('Advertencia', data.Message, 'notice')
    }
    else {
    $('#DatosTabla').html(data);
    ReloadScript();
    valpagesize = valpagesizeTemp;

      valClv_TipSer = valClv_TipSerTemp;

      valDescripcion = valDescripcionTemp;

      valClv_Txt = valClv_TxtTemp;

      valAplicanCom = valAplicanComTemp;

      valSale_en_Cartera = valSale_en_CarteraTemp;

      valPrecio = valPrecioTemp;

      valGenera_Orden = valGenera_OrdenTemp;

      valEs_Principal = valEs_PrincipalTemp;

      valClv_Trabajo = valClv_TrabajoTemp;

    $('#cargandoGrid').css("display", "none");
    }
    },
    error: function (xhr, ajaxOptions, thrownError) {
    ShowNotification('Error', thrownError + '' + xhr.status, 'error')
    $('#cargandoGrid').css("display", "none");
    }
    });
    }

</script>

<br />
<br />
<p style="font-size: 20px; padding-bottom: 0px; color: rgb(138, 136, 136);">Servicio</p>
<hr />

<div class="containerDivGrey">

    <table>

        <tr>
            <td style="width:12%">
                @Html.Label((String)ViewBag.DisplayClv_TipSer)

            </td>
            <td style="width:25%">
                <input type="text" id="Clv_TipSertxt" class="inputSearch" autocomplete="off" placeholder="Buscar" />
            </td>
            <td style="width:25%"></td>
            <td style="width:25%"></td>
        </tr>

        <tr>
            <td style="width:12%">
                @Html.Label((String)ViewBag.DisplayDescripcion)

            </td>
            <td style="width:25%">
                <input type="text" id="Descripciontxt" class="inputSearch" autocomplete="off" placeholder="Buscar" />
            </td>
            <td style="width:25%"></td>
            <td style="width:25%"></td>
        </tr>

        <tr>
            <td style="width:12%">
                @Html.Label((String)ViewBag.DisplayClv_Txt)

            </td>
            <td style="width:25%">
                <input type="text" id="Clv_Txttxt" class="inputSearch" autocomplete="off" placeholder="Buscar" />
            </td>
            <td style="width:25%"></td>
            <td style="width:25%"></td>
        </tr>

        <tr>
            <td style="width:12%">
                @Html.Label((String)ViewBag.DisplayAplicanCom)

            </td>
            <td style="width:25%">
                <input type="text" id="AplicanComtxt" class="inputSearch" autocomplete="off" placeholder="Buscar" />
            </td>
            <td style="width:25%"></td>
            <td style="width:25%"></td>
        </tr>

        <tr>
            <td style="width:12%">
                @Html.Label((String)ViewBag.DisplaySale_en_Cartera)

            </td>
            <td style="width:25%">
                <input type="text" id="Sale_en_Carteratxt" class="inputSearch" autocomplete="off" placeholder="Buscar" />
            </td>
            <td style="width:25%"></td>
            <td style="width:25%"></td>
        </tr>

        <tr>
            <td style="width:12%">
                @Html.Label((String)ViewBag.DisplayPrecio)

            </td>
            <td style="width:25%">
                <input type="text" id="Preciotxt" class="inputSearch" autocomplete="off" placeholder="Buscar" />
            </td>
            <td style="width:25%"></td>
            <td style="width:25%"></td>
        </tr>

        <tr>
            <td style="width:12%">
                @Html.Label((String)ViewBag.DisplayGenera_Orden)

            </td>
            <td style="width:25%">
                <input type="text" id="Genera_Ordentxt" class="inputSearch" autocomplete="off" placeholder="Buscar" />
            </td>
            <td style="width:25%"></td>
            <td style="width:25%"></td>
        </tr>

        <tr>
            <td style="width:12%">
                @Html.Label((String)ViewBag.DisplayEs_Principal)

            </td>
            <td style="width:25%">
                <input type="text" id="Es_Principaltxt" class="inputSearch" autocomplete="off" placeholder="Buscar" />
            </td>
            <td style="width:25%"></td>
            <td style="width:25%"></td>
        </tr>

        <tr>
            <td style="width:12%">
                @Html.Label((String)ViewBag.DisplayClv_Trabajo)

            </td>
            <td style="width:25%">
                <input type="text" id="Clv_Trabajotxt" class="inputSearch" autocomplete="off" placeholder="Buscar" />
            </td>
            <td style="width:25%"></td>
            <td style="width:25%"></td>
        </tr>

    </table>

    <div class="buscarPanelButton" style="text-align:right">
        <button class="btnBuscar">Buscar</button>
        <button class="btnLimpiar">Limpiar</button>
    </div>
</div>

<p>
    @Html.ActionLink("Nuevo", "Create", null, new { @class = "btnNew" })
</p>

<div class="containerDivGrey">
    <div id="loadingcontent">
        <div class="titleheaderblue">
            <div style="float: right; padding: 6px 9px 0px 10px;">
                <table>
                    <tbody>
                        <tr>

                            <td></td>
                            <td>
                                @Html.DropDownList("selectPage", new List<SelectListItem> {
    new SelectListItem { Text = "15", Value = "15" },
    new SelectListItem { Text="30",Value="30"},
    new SelectListItem { Text="45",Value="45"},
    new SelectListItem { Text="60",Value="60"},
    new SelectListItem { Text="75",Value="75"},
    new SelectListItem { Text="90",Value="90"}
    })
                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>

            <br />
        </div>

        <div id="DatosTabla">
            <table class="table" id="datost">
                <tr>

                    <th>

                    </th>

                    <th>

                    </th>

                    <th>

                    </th>

                    <th>
                        @Html.Label((String)ViewBag.DisplayClv_TipSer)

                    </th>

                    <th>
                        @Html.Label((String)ViewBag.DisplayDescripcion)

                    </th>

                    <th>
                        @Html.Label((String)ViewBag.DisplayClv_Txt)

                    </th>

                    <th>
                        @Html.Label((String)ViewBag.DisplayAplicanCom)

                    </th>

                    <th>
                        @Html.Label((String)ViewBag.DisplaySale_en_Cartera)

                    </th>

                    <th>
                        @Html.Label((String)ViewBag.DisplayPrecio)

                    </th>

                    <th>
                        @Html.Label((String)ViewBag.DisplayGenera_Orden)

                    </th>

                    <th>
                        @Html.Label((String)ViewBag.DisplayEs_Principal)

                    </th>

                    <th>
                        @Html.Label((String)ViewBag.DisplayClv_Trabajo)

                    </th>


                </tr>

                @foreach (var item in Model)
                {

                    <tr>
                        <td style="display:none">
                            @Html.DisplayFor(modelItem => item.Clv_Servicio)
                        </td>
                        <td style="width: 20px;">
                            <a href="@Url.Action("Edit", "Servicio",new { id=item.Clv_Servicio} )" class="btnedit" style="color:white">
                                <img src="@Url.Content("~/Content/images/editicon.png")" height="20" width="20" />
                        </td>

                        <td style="width: 20px;">
                            <a href="@Url.Action("Details", "Servicio",new {id=item.Clv_Servicio } )" class="btndetails" style="color:white">
                                <img src="@Url.Content("~/Content/images/detailsicon.png")" height="20" width="20" />
                        </td>

                        <td style="width: 20px;">
                            @*<a href="@Url.Action("Delete", "Servicio",new {id=item.Clv_Servicio} )" class="btndelete" style="color:white" >
                                <img src="@Url.Content("~/Content/images/deleteicon.png")" height="20" width="20" />*@
                            <img src="~/Content/images/deleteicon.png" height="20" width="20" class="btndelete" style="cursor:pointer">
                        </td>

                        <td>
                            @Html.DisplayFor(modelItem => item.Clv_TipSer)
                        </td>

                        <td>
                            @Html.DisplayFor(modelItem => item.Descripcion)
                        </td>

                        <td>
                            @Html.DisplayFor(modelItem => item.Clv_Txt)
                        </td>

                        <td>
                            @if (item.AplicanCom == true)
                            {
                                @Html.CheckBox("AplicanCom", new { id = "checkAplicanCom", @checked = "true", disabled = "disabled" })
                            }
                            else
                            {
                                @Html.CheckBox("AplicanCom", new { id = "checkAplicanCom", disabled = "disabled" })
                            }
                        </td>

                        <td>
                            @if (item.Sale_en_Cartera == true)
                            {
                                @Html.CheckBox("Sale_en_Cartera", new { id = "checkSale_en_Cartera", @checked = "true", disabled = "disabled" })
                            }
                            else
                            {
                                @Html.CheckBox("Sale_en_Cartera", new { id = "checkSale_en_Cartera", disabled = "disabled" })
                            }
                        </td>

                        <td>
                            @Html.DisplayFor(modelItem => item.Precio)
                        </td>

                        <td>
                            @if (item.Genera_Orden == true)
                            {
                                @Html.CheckBox("Genera_Orden", new { id = "checkGenera_Orden", @checked = "true", disabled = "disabled" })
                            }
                            else
                            {
                                @Html.CheckBox("Genera_Orden", new { id = "checkGenera_Orden", disabled = "disabled" })
                            }
                        </td>

                        <td>
                            @if (item.Es_Principal == true)
                            {
                                @Html.CheckBox("Es_Principal", new { id = "checkEs_Principal", @checked = "true", disabled = "disabled" })
                            }
                            else
                            {
                                @Html.CheckBox("Es_Principal", new { id = "checkEs_Principal", disabled = "disabled" })
                            }
                        </td>

                        <td>
                            @Html.DisplayFor(modelItem => item.Clv_Trabajo)
                        </td>

                    </tr>

                }
            </table>
            <div id="Paginator" class="pagefooter">
                @Html.PagedListPager(Model, page => Url.Action("QuickIndex", new { page }), new PagedListRenderOptions
    {
        LinkToFirstPageFormat = "1",
        LinkToPreviousPageFormat = "Anterior",
        LinkToNextPageFormat = "Siguiente",
        LinkToLastPageFormat = "Ultima",
    })
            </div>
        </div>
    </div>
</div>
